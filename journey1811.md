## 20181107:love_hotel:

#### 待深入问题:rocket:

* spring security
  * 目前只有hello2作为token检验的接口，实际应该所有的接口都要经过token验证后才能使用，这样才有预防攻击；有更好的新方法便是使用路由umi的“控制守卫”，顺便了解动态路由。
  * 前端还是只能动态展示菜单，却无法限制用户直接输入url。
  * 还需要做的是通过role决定接口的访问权限
* nginx
  * nginx的gzip开启后，几百kb的问题也很快（比tomcat快）
  * https
* aop（相关教程）
  * aop，过滤，filter的区别
* 跨域
  * 跨域的参数设置
* hashHistory为什么能够防止404刷新

#### 权限方案大全:rocket:

* 外部登录权限：通过token来判断用户是否匹配，不匹配直接跳到login页面
  * 第一种（目前）：每个路由开始来一个网络请求，让后台看token是否合格，不合格直接跳转到login页面
    * 关于所有后台接口都要**验证**的情况下，也就是页面做了**登录状态**，也不是所有情况都适用，当页面展示**不需要网络请求**时，就无法控制
  * 第二种：localStorage存储登录的状态，没登录的话就跳转login页面
    * 登录状态如何处理：只能sessionStorage存储登录状态
* 内部用户权限：登录后通过后台返回该用户的所有菜单，前台动态显示；为了防止用户输入访问url访问，需要做路由守卫，如果输入的菜单路由不在后台返回的菜单，处理异常。
* 对于更改前端代码来访问某个没有权限的页面，有两种方式

  * 第一种方式（目前宝船项目的实现方式）是通过后台接口权限控制，但是无法解决纯页面（无网络请求）
    * 解决方案还是为纯页面绑上一个网络请求，照样可以通过鉴权来控制页面展示

  * 第二种是上文提到的umi路由守卫加上第一种方式，每次切换路由，都要循环权限菜单列表，查看是否有权限，这不能阻止修改前端代码来访问无权限页面，还是需要第一种方式来阻止，但是第一种方式有点傻，必须要一进页面就要有一个网络请求，这样结合起来的话，请求只要有就行，纯页面要加的网络请求还是要在前面，因为纯页面的价值就是页面，而其他页面的价值则是请求接口数据。
* 异常页面的统一处理（前后台）
  * 404
  * 403
* spring security可以控制接口权限吗
* 动态路由什么用
* 路由守卫即权限路由，可以实现前端页面的路由层控制



#### react native拓展

#### restful风格接口

#### Oauth 2/JWT 

#### utf-8和GBK :rose:

* 基于区位码的GB2312 =>GBK/ANSI/CP936
  * ASCII 的单字节字母和数字引入（全角和半角区别）
* Unicode=>utf-8
  * 需要注意的是utf-8不再通过单双字节来区分全角和半角，而是通过直接编码

的方式区分。

* 中文输入法中，符号默认为全角。

* 参考：https://www.cnblogs.com/hehheai/p/6510879.html









